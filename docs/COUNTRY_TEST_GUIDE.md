# 🧪 国家模块测试指南

**版本**：v1.0  
**日期**：2024年10月24日

---

## 🚀 快速开始

### Step 1：启动应用

```bash
npm start
```

### Step 2：访问国家列表页

**方式一：通过底部Tab（推荐，但需先开发Tab导航）**
```
点击底部"国家"Tab
```

**方式二：直接路由访问**
```
在浏览器或 Expo Go 中输入：/(tabs)/countries
```

**方式三：从首页跳转（测试用）**

在 `app/(main)/home.jsx` 中添加测试按钮：

```javascript
import { useRouter } from 'expo-router';

const router = useRouter();

<TouchableOpacity onPress={() => router.push('/(tabs)/countries')}>
  <Text>测试国家列表</Text>
</TouchableOpacity>
```

---

## 🧪 功能测试步骤

### 1. 测试国家列表页

#### 基础功能测试

**步骤**：
1. ✅ 打开国家列表页
2. ✅ 查看页面是否正常显示
3. ✅ 检查热门推荐区（横向滚动）
4. ✅ 滚动查看全部国家列表
5. ✅ 测试下拉刷新

**预期结果**：
- 页面正常显示，无报错
- 热门推荐区显示4个国家卡片
- 可以横向滚动热门卡片
- 全部国家列表正常显示
- 下拉刷新有动画，1.5秒后完成

---

#### 搜索功能测试

**步骤**：
1. ✅ 点击搜索框
2. ✅ 输入 "美"
3. ✅ 观察搜索结果
4. ✅ 输入 "United"
5. ✅ 测试英文搜索
6. ✅ 点击清除按钮

**预期结果**：
- 搜索框获得焦点
- 输入"美"后只显示包含"美"的国家（美国）
- 输入"United"后显示美国、英国
- 清除按钮清空搜索内容
- 搜索结果实时更新

---

#### 筛选功能测试

**步骤**：
1. ✅ 默认显示"全部"Tab
2. ✅ 点击"热门推荐"Tab
3. ✅ 点击"留学热门"Tab
4. ✅ 点击"工作友好"Tab
5. ✅ 点击"移民推荐"Tab
6. ✅ 返回"全部"Tab

**预期结果**：
- 默认显示所有国家（8个）
- 热门推荐：显示4个热门国家
- 留学热门：显示带"留学热门"标签的国家
- 工作友好：显示带"工作友好"标签的国家
- 移民推荐：显示带"移民推荐"标签的国家
- Tab切换有高亮效果

---

#### 国家卡片测试

**步骤**：
1. ✅ 查看卡片信息完整性
2. ✅ 点击收藏按钮（❤️）
3. ✅ 再次点击取消收藏
4. ✅ 点击卡片本体
5. ✅ 检查是否跳转到详情页

**预期结果**：
- 卡片显示：国旗、名称、描述、评分、难度、费用、标签
- 点击收藏按钮：控制台输出"收藏/取消收藏: XX"
- 收藏图标变化（空心❤️ ↔️ 实心❤️）
- 点击卡片：跳转到国家详情页

---

### 2. 测试国家详情页

#### 基础显示测试

**步骤**：
1. ✅ 从列表页点击美国卡片
2. ✅ 观察详情页是否正常显示
3. ✅ 查看头部Banner
4. ✅ 查看Tab栏
5. ✅ 查看底部按钮

**预期结果**：
- 详情页正常打开
- 头部显示：渐变背景 + 国旗🇺🇸 + "美国" + "United States of America"
- Tab栏显示：概览、留学、工作、移民、生活
- 底部显示："开始规划"按钮

---

#### 滚动效果测试

**步骤**：
1. ✅ 页面初始状态
2. ✅ 向上滚动页面
3. ✅ 观察头部Banner
4. ✅ 观察Tab栏
5. ✅ 继续滚动到底部
6. ✅ 向下滚动返回顶部

**预期结果**：
- 初始：头部Banner完整显示
- 向上滚动：头部Banner逐渐向上移动并淡出
- Tab栏：滚动到一定位置后固定在顶部（吸顶效果）
- 滚动流畅，无卡顿
- 视差效果自然

---

#### Tab切换测试

**步骤**：
1. ✅ 默认显示"概览"Tab
2. ✅ 点击"留学"Tab
3. ✅ 点击"工作"Tab
4. ✅ 点击"移民"Tab
5. ✅ 点击"生活"Tab
6. ✅ 返回"概览"Tab

**预期结果**：
- 默认显示概览内容
- 点击Tab后立即切换内容
- 激活的Tab有下划线指示器
- Tab文字颜色变化（灰色 → 主色）
- 内容区域平滑切换

---

#### 概览Tab测试

**步骤**：
1. ✅ 查看数据概览卡片
2. ✅ 查看费用预估卡片
3. ✅ 查看优势列表
4. ✅ 查看劣势列表
5. ✅ 查看适合人群
6. ✅ 查看基本信息

**预期结果**：
- 数据概览：显示教育质量、生活成本、签证难度评分
- 费用预估：显示学费、生活费、总计
- 优势：5条，每条有绿色✓图标
- 劣势：4条，每条有红色✗图标
- 适合人群：4条，点状列表
- 基本信息：语言、货币、时差、学制

---

#### 留学Tab测试

**步骤**：
1. ✅ 查看学历层次卡片
2. ✅ 点击不同学历（本科/硕士/博士/语言学校）
3. ✅ 查看申请流程
4. ✅ 点击展开/收起步骤
5. ✅ 查看材料清单
6. ✅ 查看费用明细
7. ✅ 查看常见问题

**预期结果**：
- 学历层次：4个卡片，默认选中"硕士留学"
- 点击切换：卡片背景和边框变化
- 申请流程：6个步骤，带序号
- 展开步骤：显示详细任务列表
- 材料清单：必需材料 + 可选材料
- 费用明细：申请阶段 + 留学阶段
- 常见问题：5个问题 + "查看全部"链接

---

#### 工作Tab测试

**步骤**：
1. ✅ 查看工作签证类型
2. ✅ 查看H-1B申请流程
3. ✅ 查看Tips提示框
4. ✅ 查看热门行业
5. ✅ 查看薪资水平
6. ✅ 查看工作环境

**预期结果**：
- 签证类型：3种（H-1B、L-1、O-1）
- H-1B流程：5个步骤，有序号
- Tips：黄色提示框，3条建议
- 热门行业：6个行业卡片，不同颜色图标
- 薪资水平：5个职位及薪资范围
- 工作环境：4条特点，有✓图标

---

#### 移民Tab测试

**步骤**：
1. ✅ 查看移民途径
2. ✅ 查看申请流程
3. ✅ 查看费用预估
4. ✅ 查看注意事项

**预期结果**：
- 移民途径：4种（技术/投资/雇主担保/亲属）
- 每种途径：显示难度、时长、要求
- 申请流程：6个步骤，带连接线
- 费用预估：5项费用 + 总计
- 注意事项：4条，橙色圆点

---

#### 生活Tab测试

**步骤**：
1. ✅ 查看生活成本
2. ✅ 查看气候环境
3. ✅ 查看文化特色
4. ✅ 查看安全指数
5. ✅ 查看实用信息

**预期结果**：
- 生活成本：6个类别（住宿/餐饮/交通等）+ 总计
- 气候环境：气候类型 + 特点标签 + 温度
- 文化特色：4个方面（语言/饮食/生活节奏/社交）
- 安全指数：综合评分 + 4个维度评分条
- 实用信息：紧急电话/医疗保险/交通出行

---

#### 交互功能测试

**步骤**：
1. ✅ 点击左上角返回按钮
2. ✅ 返回列表页后再进入详情页
3. ✅ 点击右上角收藏按钮
4. ✅ 再次点击取消收藏
5. ✅ 点击底部"开始规划"按钮

**预期结果**：
- 返回按钮：返回到国家列表页
- 重新进入：详情页正常显示
- 收藏按钮：图标变化（空心❤️ ↔️ 实心❤️）
- 收藏状态：控制台输出
- 开始规划：控制台输出"创建规划: 美国"

---

### 3. 测试不同国家

**步骤**：
1. ✅ 返回列表页
2. ✅ 点击英国卡片
3. ✅ 查看英国详情
4. ✅ 返回，点击加拿大
5. ✅ 查看加拿大详情

**预期结果**：
- 每个国家的详情页都能正常打开
- 国旗、名称正确显示
- 内容区域正常显示（虽然是模拟数据）

---

### 4. 边界情况测试

#### 空搜索结果测试

**步骤**：
1. ✅ 在搜索框输入 "xyzabc123"
2. ✅ 观察空状态

**预期结果**：
- 显示空状态图标（地球图标）
- 显示"未找到相关国家"
- 显示"试试其他关键词或筛选条件"

---

#### 筛选无结果测试

**步骤**：
1. ✅ 搜索 "德国"
2. ✅ 切换到"移民推荐"Tab

**预期结果**：
- 显示空状态（因为德国不在移民推荐中）

---

## 📱 控制台测试输出

在测试过程中，查看控制台输出：

```javascript
// 收藏国家
"收藏/取消收藏: 1"

// 打开详情
"打开国家详情: 美国"

// 创建规划
"创建规划: 美国"
```

---

## ✅ 测试检查清单

### 国家列表页
- [ ] 页面正常加载
- [ ] 热门推荐区显示
- [ ] 横向滚动流畅
- [ ] 全部国家显示
- [ ] 搜索功能正常
- [ ] 筛选功能正常
- [ ] 下拉刷新正常
- [ ] 空状态正常
- [ ] 收藏按钮响应
- [ ] 跳转详情正常

### 国家详情页
- [ ] 详情页正常加载
- [ ] 头部Banner显示
- [ ] 视差滚动效果
- [ ] Tab栏吸顶效果
- [ ] Tab切换正常
- [ ] 概览内容显示
- [ ] 留学内容显示
- [ ] 工作内容显示
- [ ] 移民内容显示
- [ ] 生活内容显示
- [ ] 展开/收起功能
- [ ] 返回按钮正常
- [ ] 收藏按钮正常
- [ ] 底部按钮正常

### 交互体验
- [ ] 滚动流畅
- [ ] 动画自然
- [ ] 点击反馈正常
- [ ] 无卡顿现象
- [ ] 无闪烁现象

---

## 🐛 问题记录模板

如果发现问题，请记录：

```markdown
### 问题描述
[详细描述问题现象]

### 复现步骤
1. [步骤1]
2. [步骤2]
3. [步骤3]

### 预期结果
[应该是什么样的]

### 实际结果
[实际是什么样的]

### 设备信息
- 设备：[iPhone 14 Pro / Android等]
- 系统：[iOS 17.0 / Android 13等]
- 应用版本：[v1.0.0]

### 截图/录屏
[如果有的话]

### 控制台错误
[如果有的话]
```

---

## 📝 测试报告模板

完成测试后，填写以下报告：

```markdown
## 国家模块测试报告

**测试日期**：2024-10-24  
**测试人员**：[你的名字]  
**测试设备**：[设备型号]  
**测试环境**：[iOS/Android/Web]

### 测试结果

| 功能模块 | 测试项 | 结果 | 备注 |
|---------|--------|------|------|
| 列表页 | 页面加载 | ✅/❌ | |
| 列表页 | 搜索功能 | ✅/❌ | |
| 列表页 | 筛选功能 | ✅/❌ | |
| 列表页 | 下拉刷新 | ✅/❌ | |
| 列表页 | 卡片点击 | ✅/❌ | |
| 详情页 | 页面加载 | ✅/❌ | |
| 详情页 | 视差滚动 | ✅/❌ | |
| 详情页 | Tab切换 | ✅/❌ | |
| 详情页 | 概览内容 | ✅/❌ | |
| 详情页 | 留学内容 | ✅/❌ | |
| 详情页 | 工作内容 | ✅/❌ | |
| 详情页 | 移民内容 | ✅/❌ | |
| 详情页 | 生活内容 | ✅/❌ | |
| 详情页 | 返回按钮 | ✅/❌ | |
| 详情页 | 收藏按钮 | ✅/❌ | |

### 发现的问题

1. [问题描述]
2. [问题描述]

### 改进建议

1. [建议描述]
2. [建议描述]

### 性能评估

- 页面加载速度：⭐⭐⭐⭐⭐
- 滚动流畅度：⭐⭐⭐⭐⭐
- 动画效果：⭐⭐⭐⭐⭐
- 交互响应：⭐⭐⭐⭐⭐

### 总体评价

[整体评价]
```

---

## 💡 测试技巧

### 1. 快速切换国家

```javascript
// 在详情页控制台输入
router.push('/country/US');  // 美国
router.push('/country/GB');  // 英国
router.push('/country/CA');  // 加拿大
```

### 2. 查看Redux状态

在任意页面的 `useEffect` 中添加：

```javascript
import { useSelector } from 'react-redux';

const countries = useSelector(state => state.countries);
console.log('Redux State:', countries);
```

### 3. 测试动画性能

```javascript
// 在滚动事件中添加
console.time('scroll');
// 滚动后
console.timeEnd('scroll');
```

---

## 🔧 常见问题解决

### 1. 页面无法访问

**问题**：路由404  
**解决**：检查 `app/(tabs)/_layout.jsx` 是否正确配置

### 2. 详情页参数错误

**问题**：`code` 参数undefined  
**解决**：检查路由跳转是否使用了正确的格式 `router.push(\`/country/${code}\`)`

### 3. 组件导入失败

**问题**：`Cannot find module`  
**解决**：检查 `index.js` 导出文件是否正确

---

## 📞 问题反馈

如果测试中发现严重问题，请立即反馈：

1. 截图或录屏问题现象
2. 记录详细的复现步骤
3. 提供设备和环境信息
4. 附上控制台错误日志

---

**测试愉快！** 🎉

如有任何问题，请随时联系开发团队。

